{
  "title" : "Build Model",
  "sections" : [ {
    "name" : "Model",
    "model" : "BuildModel",
    "fields" : [ {
      "name" : "ModelName"
    }, {
      "name" : "ModelBasisTable",
      "selectModel" : "ListTables",
      "selectSourceField" : "TableName",
      "fieldType" : "select",
      "links" : [ {
        "page" : "BuildTable",
        "filter" : "TableName Equals '${ModelBasisTable}'"
      } ]
    }, {
      "name" : "ModelParentName",
      "label" : "Parent Model",
      "links" : [ {
        "page" : "BuildModel",
        "filter" : "ModelID Equals ${ModelParentID}"
      } ]
    }, {
      "name" : "ModelModule"
    }, {
      "name" : "ModelLimit"
    }, {
      "name" : "ModelPreSave"
    }, {
      "name" : "ModelFilter"
    }, {
      "name" : "ModelExtends"
    }, {
      "name" : "ModelCustomUrlSource"
    }, {
      "name" : "ModelAllowInsert"
    }, {
      "name" : "ModelAllowUpdate"
    }, {
      "name" : "ModelAllowDelete"
    } ],
    "sections" : [ {
      "name" : "ModelSteps",
      "model" : "ModelSteps",
      "title" : "Steps",
      "fields" : [ {
        "name" : "ModelStepName",
        "label" : "Step Name",
        "showInNavigation" : true
      }, {
        "name" : "ModelStepJoin",
        "label" : "Table Join",
        "selectModel" : "ListTableJoins",
        "selectFilter" : "TableJoinFromTableName = '${ModelBasisTable}'",
        "selectSourceField" : "TableJoinName",
        "fieldType" : "select"
      }, {
        "name" : "ModelStepParentName",
        "label" : "Parent Step"
      } ]
    }, {
      "name" : "ModelFields",
      "model" : "ModelFields",
      "title" : "Fields",
      "fields" : [ {
        "name" : "ModelFieldName",
        "label" : "Field Name",
        "showInNavigation" : true
      }, {
        "name" : "ModelFieldBasisColumn",
        "selectModel" : "ListTableColumns",
        "selectFilter" : "ColumnTableName Equals '${ModelBasisTable}'",
        "selectSourceField" : "ColumnName",
        "fieldType" : "select"
      }, {
        "name" : "ModelFieldStepName",
        "selectModel" : "ListModelSteps",
        "selectFilter" : "ModelStepModelID Equals ${ModelID}",
        "selectSourceField" : "ModelStepName",
        "fieldType" : "select"
      }, {
        "name" : "ModelFieldUpdateable"
      }, {
        "name" : "ModelFieldRequired"
      }, {
        "name" : "ModelFieldExport"
      } ]
    }, {
      "name" : "ModelSort",
      "model" : "ModelSort",
      "title" : "Sorting",
      "fields" : [ {
        "name" : "ModelSortFieldName",
        "selectTargetID" : "ModelSortFieldID",
        "label" : "Field Name",
        "selectModel" : "ListModelFields",
        "selectFilter" : "FieldModelID Equals ${ModelID}",
        "selectSourceField" : "FieldName",
        "fieldType" : "select"
      }, {
        "name" : "ModelSortAscending"
      } ]
    }, {
      "name" : "ChildModel",
      "model" : "ChildModel",
      "title" : "Child Models",
      "fields" : [ {
        "name" : "ChildModelName",
        "showInNavigation" : true,
        "links" : [ {
          "page" : "BuildModel",
          "filter" : "ModelID Equals ${ChildModelID}"
        } ]
      }, {
        "name" : "ChildModelBasisTable",
        "selectModel" : "ListTables",
        "selectSourceField" : "TableName",
        "fieldType" : "select",
        "links" : [ {
          "page" : "BuildTable",
          "filter" : "TableName Equals '${ChildModelBasisTable}'"
        } ]
      }, {
        "name" : "ChildModelParentField",
        "selectModel" : "ListModelFields",
        "selectFilter" : "FieldModelID Equals ${ModelID}",
        "selectSourceField" : "FieldName",
        "fieldType" : "select"
      }, {
        "name" : "ChildModelChildField",
        "selectModel" : "ListModelFields",
        "selectFilter" : "FieldModelID Equals ${ChildModelID}",
        "selectSourceField" : "FieldName",
        "fieldType" : "select"
      } ]
    } ],
    "buttons" : [ {
      "label" : "Export",
      "fxn" : "var row = section.getCurrentSet().getInstance();\nvar model = row.getValue('ModelName');\nvar moduleName = row.getValue('ModelModule');\n$http.post('/export/' + moduleName + '/Model/' + model).success(function(data) { alert(data.message) });"
    } ]
  } ]
}